#!/usr/bin/env bash
# PreToolUse hook: remind Claude to use uv when python is invoked in a uv project

set -euo pipefail

INPUT=$(cat)
COMMAND=$(echo "$INPUT" | jq -r '.tool_input.command')

if ! is-uv-project; then
  exit 0
fi

# Check if command contains python but not uv
if echo "$COMMAND" | grep -q 'python' && ! echo "$COMMAND" | grep -q 'uv'; then
  echo "Use 'uv run python' instead of 'python' directly." >&2
  exit 2
fi

exit 0
